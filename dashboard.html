<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
</head>
<body>

<script type="module">
import { auth, db } from "./firebase.js";
import { doc, getDoc } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

auth.onAuthStateChanged(async user=>{
    if(!user){
        location.href="index.html";
        return;
    }

    const snap = await getDoc(doc(db,"users",user.uid));
    const role = snap.data().role;

    if(role==="admin_premium") location.href="adminPremium.html";
    if(role==="admin") location.href="admin.html";
    if(role==="intendant") location.href="intendance.html";
});
</script>

</body>
</html>